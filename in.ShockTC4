


# ---------- Initialize Simulation ---------------------
clear
units             metal
dimension         3
boundary          s p p
atom_style        atomic
atom_modify       map array
neighbor        2.0 bin  
neigh_modify    delay 10 check yes  
timestep	       0.001
read_data     7.lmp
region          piston block INF 10 INF INF INF INF
group piston region piston
region         bulk block 10 INF INF INF INF INF 
group bulk region bulk


pair_style	eam/alloy
pair_coeff   * * AlVTi.eam.alloy Ti Al V


reset_timestep 0 
 
compute    myCN bulk cna/atom 1
compute    myKE bulk ke/atom
compute    myPE bulk pe/atom
compute    myCOM bulk com
compute    peratom bulk stress/atom NULL
compute    vx bulk property/atom vx 


variable    eq1 equal "step"
variable    eq2 equal "pxx/10000"
variable   eq3 equal "pyy/10000"
variable    eq4 equal "pzz/10000"
variable    eq5 equal "lx"
variable    eq6 equal "ly"
variable   eq7 equal "lz"
variable   eq8 equal "temp"
variable   eq9 equal "etotal"


thermo 100 
fix  1 all nve 
velocity    piston set X 0 0 sum no units box #X=8 10 12 12.5 13 13.5 14 16 18 20 22 24
fix      2 piston setforce 0.0 0.0 0.0

variable      atomx atom x
variable      atomstep  atom step
compute         layers all chunk/atom bin/1d x lower 0.005     units reduced

fix         time1 bulk ave/time 10 5 100  v_eq1 v_eq2 v_eq3 v_eq4 v_eq5 v_eq6 v_eq7 v_eq8 v_eq9 file time1.time
fix         histo1 bulk ave/histo 10 5 100  -350 350 50 v_eq1 v_eq2 v_eq3 v_eq4 v_eq5 v_eq6 v_eq7 v_eq8 v_eq9 file histo1.histo

fix     density_profile bulk ave/chunk 10 5 100  layers vx v_atomstep v_atomx density/mass  file denx.profile 
variable    temp atom c_myKE/(1.5*8.61*(10^(-5)))

fix      temp_profile bulk ave/chunk 10 5 100  layers  v_atomstep v_atomx v_temp file temp.profile 


variable   meanpress atom -(c_peratom[1]+c_peratom[2]+c_peratom[3])/3
fix    pressure_profile bulk ave/chunk  10 5 100 layers   v_meanpress  v_temp file pressure.profile
fix    velX_profile bulk ave/chunk  10 5 100  layers  v_atomstep v_atomx c_vx v_meanpress   v_temp  density/mass  file velocityXcomp.profile


variable   eq1 equal "step"
variable   eq2 equal "pxx/10000"
variable   eq3 equal "pyy/10000"
variable   eq4 equal "pzz/10000"
variable   eq5 equal "lx"
variable   eq6 equal "ly"
variable   eq7 equal "lz"
variable   eq8 equal "temp"
variable   eq9 equal "etotal"
variable   eq10 equal "c_myCOM[3]"
fix      shock bulk print 100 "${eq1} ${eq2} ${eq3} ${eq4} ${eq5} ${eq6} ${eq7} ${eq8} ${eq9} ${eq10}" file run.300K.out screen no



dump 		   1 all cfg 200 final_*.lmp mass type xs ys zs c_myPE c_myKE c_myCN  fx fy fz vx vy vz  x y z c_peratom[1] c_peratom[2] c_peratom[3] c_peratom[4] c_peratom[5] c_peratom[6]  c_vx   v_atomstep   v_atomx v_meanpress v_temp
dump_modify     1 element  Ti Al V
dump_modify     1 sort id


thermo    100
thermo_style	   custom step lx ly lz xlo xhi pxx pyy pzz temp  ke pe press etotal enthalpy ebond eangle emol vol density c_myCOM[3]   

run    10000

unfix 2
thermo    100
thermo_style	   custom step lx ly lz xlo xhi pxx pyy pzz temp  ke pe press etotal enthalpy ebond eangle emol vol density c_myCOM[3]  

run    40000

